---
title: "gil.log(210710);"
last_modified_at: 2021-07-10T00:06
categories: 
  - gillog
tags:
toc: true
toc_label: 'ëª©ì°¨'
toc_icon: 'sort'
toc_sticky: true
---
# Today To Do

- JPA ì •ë¦¬

- ì›¹ API ì½ê¸°

- DDaJa HATEOS ê´€ë¦¬ Enum ê°œë°œ

- ~~DDaJa ê³µí†µ DTO ëª¨ë¸ë§~~

- JWT í† í° ê´€ë¦¬

# gil.log

ì˜¤ëŠ˜ë„ í•´ìœ„~~

![](https://images.velog.io/images/gillog/post/d2b99812-6018-4169-9849-78ea5c09e898/image.png)

íŒŒì£¼ìª½ ì¹´í˜ ë‹¤ë‹ˆë‹¤ ê°„ë§Œì— íŒŒìŠ¤ì¿ ì°Œ ì˜¤ë‹ˆ ì§‘ìœ¼ë¡œ ëŒì•„ì˜¨ ëŠë‚Œì´ë‹¤. ã…‹ã…‹ã…‹

ê¸¸ë¡œê·¸ í•˜ëŠ”ê±¸ ì°ì€ê±¸ ê¸¸ë¡œê·¸ì— ì˜¬ë¦¬ë©´ì„œ ê¸¸ë¡œê·¸ í•˜ëŠ”ê±¸ ì°ì€ê±¸ ê¸¸ë¡œê·¸ì— ì˜¬ë¦¬ê³  ìˆëŠ”ê±¸ ê¸¸ë¡œê·¸ì— ì˜¬ë¦¬ë‹ˆ ì •ì‹  ë‚˜ê°ˆê²ƒ ê°™êµ° ã…‹ã…‹

ì•„ë¬´íŠ¼ ì•„ì¹¨ ì‹œì‘ì€

![](https://images.velog.io/images/gillog/post/8f0178f3-e7ed-467e-b4cb-446b3cb25f11/image.png)

ã…‹ã…‹ã…‹

ì–´ì œ ì“°ë‹¤ê°€ ê¹Œë¨¹ì€ê±° ì˜¬ë¦¬ê³  ì‹œì‘í•´ì•¼ê² ë‹¤.

ì´ëŸ°ê±° ì•ˆì¨ë†“ìœ¼ë©´ ë˜ ë‚˜ì¤‘ì— í•´ë©˜ë‹¤ ì¦ë§ ã…‹ã…‹

![](https://images.velog.io/images/gillog/post/73eb6638-f7ea-4099-a2f6-2932d922c839/image.png)

>í•´ë©˜ë‹¤(X) -> í—¤ë§¨ë‹¤(O)

ì§€ì‹ì´ ëŠ˜ì—ˆêµ° ã…‹ã…‹

ì•„ë¬´íŠ¼ ë˜ ë‚˜ì¤‘ì— í—¤ë§¬ìˆ˜ ìˆìœ¼ë‹ˆ ê¸¸ë¡œê¹… í›„ë”±í•˜ê³ 

ì–´ì œ íšŒì‚¬ API ì„œë²„ ìƒì„±í•˜ë©´ì„œ ì´ˆì•ˆ ì¡ì€ HATEOS Enum í•˜ê³  Parameter ëª¨ë¸ë§í•œë‹¤ìŒì—

JPA ë§¤í•‘ ê´€ë ¨ ì •ë¦¬í•˜ê³  ì›¹ API ì¢€ ì½ì–´ì•¼ê² ë‹¤ ã…‹ã…‹

ê·¸ëŸ¼ ìŠ¤íƒ€ëœ¨~


[ì˜ˆìŠ¤ ì •ë¦¬ ì™„ë£Œ](https://velog.io/@gillog/JPA-Spring-Boot-JPA-Entity-Table-%EB%8C%80-%EC%86%8C%EB%AC%B8%EC%9E%90-%EA%B5%AC%EB%B6%84-%EB%AA%BB%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%ED%95%B4%EA%B2%B0)

ê·¸ëŸ¼ Next Levelë¡œ ê°€ë³´ì.

DDaJa HATEOS Enum ê°œë°œ ê¸°ê¸°~~

![](https://images.velog.io/images/gillog/post/fd1faae8-6be7-41c7-a452-76116844cc0d/image.png)

ìš°ì„  DDaJa ê³µí†µ DTO Modelingì€ íšŒì‚¬ API Server Modeling í•˜ë©´ì„œ ëŒ€ì¶© ë§ˆë¬´ë¦¬ ëë‹¤.

ë¬¼ë¡  ìˆ˜ì • ì‚¬í•­ì´ ë§ê² ì§€ë§Œ,,

ê·¼ë° ë¬¸ì œëŠ” ì—¬ê¸°ê°€ ì•„ë‹ˆë¼ HATEOS ê´€ë ¨ Enum ì‚¬ìš© ê°œë°œ ê±´ì´ë‹¤..

```java
public enum Licenses {
    SELF("GET", "https://api.ddaja.com/licenses/")
    , UPDATE("PATCH", "https://api.ddaja.com/licenses/")
    , REPLACE("PUT", "https://api.ddaja.com/licenses/")
    , DELETE("DELETE", "https://api.ddaja.com/licenses/");

    public String method;
    public String url;

    Licenses(String method, String url) {
        this.method = method;
        this.url = url;
    }

    public List<Link> makeLinkList(Long id) {
        return Arrays.stream(values()).map(e -> new Link(name(), url+id.toString(), method)).collect(Collectors.toList());
    }
}

```

```java
    @GetMapping("/two/{id}")
    @ResponseBody
    public List<Link> two(@PathVariable(name = "id") Long id) {
        return Arrays.stream(Licenses.values()).map(e -> new Link(e.name(), e.url+id.toString(), e.method)).collect(Collectors.toList());
    }
```

ì–´ì œ íšŒì‚¬ì—ì„œ ì´ëŸ° ì‹ìœ¼ë¡œ ê°œë°œì„ ìš°ì„  ì»¨ì…‰ì„ ì¡ì•„ë‘ì—ˆëŠ”ë°,

ì´ê²Œ ì¢€ ê·¸ì§€ê°™ë‹¤.

ìš°ì„  Enum Instanceê°€ Finalí•˜ë‹¤ ë³´ë‹ˆ ê¸°ë³¸ License íƒ€ì…ìœ¼ë¡œ .values()ë¡œ,

Enum ìì‹  ê°ì²´ ì•ˆì—ë‹¤ê°€ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•œê±¸

ë‹¤ë¥¸ Classì—ì„œ í˜¸ì¶œí•  ìˆ˜ê°€ ì—†ë‹¤..

ê·¸ë˜ì„œ ì €ë ‡ê²Œ ê·¸ì§€ê°™ì´ Controllerë‹¨ì—ì„œ ìš°ì„ ì ìœ¼ë¡œ Instanceí™” ëœ Enumì˜ .values()ë¥¼ í˜¸ì¶œí•´ì„œ Link ìƒì„± í›„ Listë¡œ ëª¨ìœ¼ëŠ”ë°,,

ì´ê±¸ Interfaceí™” í•´ì„œ Classì—ì„œ ê³µí†µì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì‹¶ì€ë°,,,

ì•„~~ ë¨¸ë¦¬ í„°ì§ˆê±° ê°™ë„¤

enumì€ ìƒì†ì€ ì•ˆë˜ê³  êµ¬í˜„ë§Œ ê°€ëŠ¥í•´ì„œ ê³µí†µ field êµ¬ì„±ë„ í˜ë“ ê²ƒ ê°™ê³ ,

Hateosìš©ë„ë¡œ ì‚¬ìš©í•  Enum ëª©ë¡ë“¤ì„ íŠ¹ì •í™” ì‹œì¼œì„œ ë§Œë“¤ê¸°ë„ ë¤ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤...

ê³µí†µ fieldë¥¼ ì •ì˜ ëª»í•˜ë‹ˆê¹Œ íŠ¹ì • íƒ€ì… enum.fieldëª… í• ìˆ˜ê°€ ì—†ë‹¤...


![](https://images.velog.io/images/gillog/post/82fb08a5-fba7-436d-b380-c111b13252d8/image.png)




![](https://images.velog.io/images/gillog/post/87ea7804-3418-462c-a6de-c1d4a867a996/image.png)

HATEOS ë¶€ë¶„ì´ ë„ˆë¬´ ë§˜ì— ì•ˆë“ ë‹¤..

streamì´ ë„ˆë¬´ ê¸¸ì–´ì§€ëŠ”ë° í ,,,




![](https://images.velog.io/images/gillog/post/2b06795a-b57b-4afb-b72f-f07ec7401b86/image.png)


Spring Http ì—ì„œ ê¸°ë³¸ ì œê³µí•˜ëŠ” `ResponseEntity` ê°ì²´ê°€ ìˆì—ˆì„ ì¤„ì´ì•¼..

![](https://images.velog.io/images/gillog/post/b0779da7-9cfd-40d9-a06b-e1e118c51d0e/image.png)

ê³µí†µ Response ê°ì²´ Modelingí•˜ê³  ë‚˜ì„œ

headerë‘ status codeëŠ” ì–´ë–»ê²Œ í•˜ì§€ ã…‹ã…‹ ë‚˜ì¤‘ì— ìƒê°í•´ì•¼ê² ë‹¤ í•˜ê³  ìˆì—ˆëŠ”ë°,

í•œë²ˆì— í•´ê²°í•´ì£¼ë‹¤ë‹ˆ,, Spring ëŒ€ë‹¨í•´ ğŸ‘ğŸ»







![](https://images.velog.io/images/gillog/post/241b8abc-0fd0-4f46-a538-6dcb8eb01ac5/image.png)


`RestControllerAdvice`ë¡œ Customí•œ Exception ê´€ë¦¬í•˜ëŠ” Handlerë„ ì„±ê³µì ìœ¼ë¡œ ì˜ ì ìš©ëœë‹¤.

![](https://images.velog.io/images/gillog/post/5fa68c22-27f2-40ed-9b2c-2acd5effb8de/image.png)


ê·¼ë° ê¸°ë³¸  Exceptionì„ ê´€ì¥í•˜ëŠ” WebMvcAutoConfigure Classê°€ ì„¸íŒ…í•˜ëŠ” DefaultHandlerExceptionResolver ë‘ ì¶©ëŒë‚˜ì„œ

Custom Exceptionë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœë‹¤ í ....


ê·¸ ì™€ì¤‘ì— ë§¥ë¶ ì˜¨ë„ ë„ˆë¬´ ëœ¨ê±°ì›Œì„œ ë„ˆë¬´ ëŠë¦¬ë‹¤


í›„ ì˜¤ëŠ˜ë„ ë‹¬ë ¸ë‹¤..

ë‚´ì¼ Parameter Valid í…ŒìŠ¤íŠ¸ í•´ë³´ê³ 

![](https://images.velog.io/images/gillog/post/51627879-5919-4056-a019-10ae52b08277/image.png)

ì¬íƒ ëŒ€ë¹„ ìœˆë„ìš° íšŒì‚¬ ê°œë°œ í™˜ê²½ ì…‹íŒ…í•˜ê³ 

ëª¨ë‹ˆí„° ì…‹íŒ… í•˜ì..

ê·¸ëŸ¬ê³ ë‚˜ì„œ API ì±… ì´ë‘ JPA ì •ë¦¬ì¢€ í•´ì•¼ê² ë‹¤.

í›„,,,

ì´ë²ˆ ì¬íƒìœ¼ë¡œ ì™•ë³µ ì¶œê·¼ ì‹œê°„í•˜ê³  ì¤€ë¹„ì‹œê°„ ì¤„ì—ˆìœ¼ë‹ˆê¹Œ

ëª©í‘œë¡œ JPA, API ì±… ë‹¤ ì½ì–´ì•¼ê² ë‹¤.

ê·¸ëŸ¼ `gil.end()`
